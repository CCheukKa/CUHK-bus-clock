const data = [
    {
        "route": "1A",
        "timeStamp": "2025-02-21T02:06:13.000Z",
        "location": {
            "coords": {
                "accuracy": 6.510000228881836,
                "longitude": 114.2102296,
                "altitude": 5.1665249150619985,
                "heading": 203.39356994628906,
                "latitude": 22.4146252,
                "altitudeAccuracy": 6.290971279144287,
                "speed": 0.5965909361839294
            },
            "mocked": false,
            "timestamp": 1740103573000
        }
    },
    {
        "route": "1A",
        "timeStamp": "2025-02-21T02:08:28.000Z",
        "location": {
            "coords": {
                "accuracy": 3.868000030517578,
                "longitude": 114.2106599,
                "altitude": 28.80000114440918,
                "heading": 278.99395751953125,
                "latitude": 22.4178839,
                "altitudeAccuracy": 5.330233573913574,
                "speed": 2.0274319648742676
            },
            "mocked": false,
            "timestamp": 1740103708000
        }
    },
    {
        "route": "1A",
        "timeStamp": "2025-02-21T02:10:40.000Z",
        "location": {
            "coords": {
                "accuracy": 9.9350004196167,
                "longitude": 114.2071417,
                "altitude": 94.5999984741211,
                "heading": 253.44378662109375,
                "latitude": 22.4199744,
                "altitudeAccuracy": 3.8099684715270996,
                "speed": 0.5542393326759338
            },
            "mocked": false,
            "timestamp": 1740103840000
        }
    },
    {
        "route": "2",
        "timeStamp": "2025-02-21T05:15:00.000Z",
        "location": {
            "coords": {
                "accuracy": 9.9350004196167,
                "longitude": 114.2050173,
                "altitude": 120.30000305175781,
                "heading": 91.1701431274414,
                "latitude": 22.4188666,
                "altitudeAccuracy": 7.629221439361572,
                "speed": 1.8106508255004883
            },
            "mocked": false,
            "timestamp": 1740114900000
        }
    },
    {
        "route": "1A",
        "timeStamp": "2025-02-22T06:35:01.159Z",
        "location": {
            "coords": {
                "accuracy": 6.510000228881836,
                "longitude": 114.2102296,
                "altitude": 5.1665249150619985,
                "heading": 203.39356994628906,
                "latitude": 22.4146252,
                "altitudeAccuracy": 6.290971279144287,
                "speed": 0.5965909361839294
            },
            "mocked": false,
            "timestamp": 1740206101659
        }
    },
    {
        "route": "1A",
        "timeStamp": "2025-02-22T06:36:51.790Z",
        "location": {
            "coords": {
                "accuracy": 3.868000030517578,
                "longitude": 114.2106599,
                "altitude": 28.80000114440918,
                "heading": 278.99395751953125,
                "latitude": 22.4178839,
                "altitudeAccuracy": 5.330233573913574,
                "speed": 2.0274319648742676
            },
            "mocked": false,
            "timestamp": 1740206211659
        }
    },
    {
        "route": "1A",
        "timeStamp": "2025-02-22T06:39:10.592Z",
        "location": {
            "coords": {
                "accuracy": 9.9350004196167,
                "longitude": 114.2071417,
                "altitude": 94.5999984741211,
                "heading": 253.44378662109375,
                "latitude": 22.4199744,
                "altitudeAccuracy": 3.8099684715270996,
                "speed": 0.5542393326759338
            },
            "mocked": false,
            "timestamp": 1740206350659
        }
    },
    {
        "route": "3",
        "timeStamp": "2025-02-22T09:03:31.264Z",
        "location": {
            "coords": {
                "accuracy": 3.7899999618530273,
                "longitude": 114.2070877,
                "altitude": 93.19999694824219,
                "heading": 29.977453231811523,
                "latitude": 22.4198944,
                "altitudeAccuracy": 3.4650022983551025,
                "speed": 2.053173780441284
            },
            "mocked": false,
            "timestamp": 1740215010637
        }
    },
    {
        "route": "3",
        "timeStamp": "2025-02-22T09:04:38.282Z",
        "location": {
            "coords": {
                "accuracy": 7.034999847412109,
                "longitude": 114.2031423,
                "altitude": 120.69999694824219,
                "heading": 265.5517883300781,
                "latitude": 22.4198627,
                "altitudeAccuracy": 3.4818084239959717,
                "speed": 1.4647209644317627
            },
            "mocked": false,
            "timestamp": 1740215077636
        }
    },
    {
        "route": "3",
        "timeStamp": "2025-02-22T09:05:14.468Z",
        "location": {
            "coords": {
                "accuracy": 9.9350004196167,
                "longitude": 114.2035052,
                "altitude": 125.19999694824219,
                "heading": 4.2358174324035645,
                "latitude": 22.4211742,
                "altitudeAccuracy": 5.145890235900879,
                "speed": 2.206486225128174
            },
            "mocked": false,
            "timestamp": 1740215113637
        }
    },
    {
        "route": "3",
        "timeStamp": "2025-02-22T09:06:48.875Z",
        "location": {
            "coords": {
                "accuracy": 9.9350004196167,
                "longitude": 114.2014694,
                "altitude": 77.5999984741211,
                "heading": 234.8313751220703,
                "latitude": 22.4225668,
                "altitudeAccuracy": 1.3559144735336304,
                "speed": 3.557555675506592
            },
            "mocked": false,
            "timestamp": 1740215208636
        }
    },
    {
        "route": "3",
        "timeStamp": "2025-02-22T09:08:55.320Z",
        "location": {
            "coords": {
                "accuracy": 9.9350004196167,
                "longitude": 114.2060993,
                "altitude": 7.199999809265137,
                "heading": 89.9621353149414,
                "latitude": 22.425745,
                "altitudeAccuracy": 21.176616668701172,
                "speed": 2.8879876136779785
            },
            "mocked": false,
            "timestamp": 1740215334636
        }
    },
    {
        "route": "3",
        "timeStamp": "2025-02-22T09:10:17.984Z",
        "location": {
            "coords": {
                "accuracy": 9.9350004196167,
                "longitude": 114.2067543,
                "altitude": 51.459043047046165,
                "heading": 250.8480682373047,
                "latitude": 22.4239104,
                "altitudeAccuracy": 4.606809616088867,
                "speed": 1.737186312675476
            },
            "mocked": false,
            "timestamp": 1740215417636
        }
    },
    {
        "route": "3",
        "timeStamp": "2025-02-22T09:11:21.397Z",
        "location": {
            "coords": {
                "accuracy": 9.9350004196167,
                "longitude": 114.2053416,
                "altitude": 77.5,
                "heading": 284.8961181640625,
                "latitude": 22.4232348,
                "altitudeAccuracy": 6.6905198097229,
                "speed": 0.5224421620368958
            },
            "mocked": false,
            "timestamp": 1740215480634
        }
    },
    {
        "route": "3",
        "timeStamp": "2025-02-22T09:12:20.196Z",
        "location": {
            "coords": {
                "accuracy": 10.446000099182129,
                "longitude": 114.2049222,
                "altitude": 104.30000305175781,
                "heading": 202.55030822753906,
                "latitude": 22.4218547,
                "altitudeAccuracy": 5.602682113647461,
                "speed": 2.665332794189453
            },
            "mocked": false,
            "timestamp": 1740215539635
        }
    },
    {
        "route": "3",
        "timeStamp": "2025-02-22T09:14:18.526Z",
        "location": {
            "coords": {
                "accuracy": 9.9350004196167,
                "longitude": 114.2013628,
                "altitude": 78.74337113989722,
                "heading": 257.3729248046875,
                "latitude": 22.4225093,
                "altitudeAccuracy": 5.225158214569092,
                "speed": 0.8260384202003479
            },
            "mocked": false,
            "timestamp": 1740215658634
        }
    },
    {
        "route": "3",
        "timeStamp": "2025-02-22T09:16:21.066Z",
        "location": {
            "coords": {
                "accuracy": 10.416999816894531,
                "longitude": 114.2035508,
                "altitude": 114.96867305098634,
                "heading": 156.1219482421875,
                "latitude": 22.4211829,
                "altitudeAccuracy": 3.336951732635498,
                "speed": 0.2308758646249771
            },
            "mocked": false,
            "timestamp": 1740215780633
        }
    },
    {
        "route": "3",
        "timeStamp": "2025-02-22T09:17:53.857Z",
        "location": {
            "coords": {
                "accuracy": 9.9350004196167,
                "longitude": 114.2050173,
                "altitude": 120.30000305175781,
                "heading": 91.1701431274414,
                "latitude": 22.4188666,
                "altitudeAccuracy": 7.629221439361572,
                "speed": 1.8106508255004883
            },
            "mocked": false,
            "timestamp": 1740215873634
        }
    },
    {
        "route": "3",
        "timeStamp": "2025-02-22T09:19:32.276Z",
        "location": {
            "coords": {
                "accuracy": 9.9350004196167,
                "longitude": 114.2097948,
                "altitude": 64.20000457763672,
                "heading": 112.01347351074219,
                "latitude": 22.4180702,
                "altitudeAccuracy": 15.679957389831543,
                "speed": 0.2037927508354187
            },
            "mocked": false,
            "timestamp": 1740215971632
        }
    },
    {
        "route": "3",
        "timeStamp": "2025-02-22T09:21:40.445Z",
        "location": {
            "coords": {
                "accuracy": 9.9350004196167,
                "longitude": 114.2105522,
                "altitude": 5.852381566144899,
                "heading": 208.60755920410156,
                "latitude": 22.4151939,
                "altitudeAccuracy": 5.304349899291992,
                "speed": 0.23347647488117218
            },
            "mocked": false,
            "timestamp": 1740216099632
        }
    },
    {
        "route": "3",
        "timeStamp": "2025-02-24T09:00:05.494Z",
        "location": {
            "coords": {
                "accuracy": 3.7899999618530273,
                "longitude": 114.2110902,
                "altitude": 3.09259033203125,
                "heading": 186.4267578125,
                "latitude": 22.4161069,
                "altitudeAccuracy": 2.5,
                "speed": 1.1674011945724487
            },
            "mocked": false,
            "timestamp": 1740387604974
        }
    },
    {
        "route": "1B",
        "timeStamp": "2025-02-26T10:08:09.961Z",
        "location": {
            "coords": {
                "accuracy": 3.7899999618530273,
                "longitude": 114.2073188,
                "altitude": 98.5999984741211,
                "heading": 0,
                "latitude": 22.4199557,
                "altitudeAccuracy": 4.159547805786133,
                "speed": 0.0020059675443917513
            },
            "mocked": false,
            "timestamp": 1740564489875
        }
    },
    {
        "route": "1A",
        "timeStamp": "2025-02-26T10:10:00.698Z",
        "location": {
            "coords": {
                "accuracy": 3.7899999618530273,
                "longitude": 114.2073186,
                "altitude": 98.5,
                "heading": 0,
                "latitude": 22.4199537,
                "altitudeAccuracy": 1.725610375404358,
                "speed": 0.004213494714349508
            },
            "mocked": false,
            "timestamp": 1740564599875
        }
    },
    {
        "route": "1A",
        "timeStamp": "2025-02-26T10:14:15.587Z",
        "location": {
            "coords": {
                "accuracy": 3.7899999618530273,
                "longitude": 114.2073398,
                "altitude": 98.0999984741211,
                "heading": 0,
                "latitude": 22.4199722,
                "altitudeAccuracy": 2.259648323059082,
                "speed": 0.00100980163551867
            },
            "mocked": false,
            "timestamp": 1740564855876
        }
    },
    {
        "route": "8",
        "timeStamp": "2025-02-26T10:15:04.223Z",
        "location": {
            "coords": {
                "accuracy": 3.7899999618530273,
                "longitude": 114.2073392,
                "altitude": 98.5,
                "heading": 0,
                "latitude": 22.4199712,
                "altitudeAccuracy": 1.5772578716278076,
                "speed": 0.005384813528507948
            },
            "mocked": false,
            "timestamp": 1740564903876
        }
    },
    {
        "route": "8",
        "timeStamp": "2025-02-26T10:16:54.999Z",
        "location": {
            "coords": {
                "accuracy": 3.7899999618530273,
                "longitude": 114.2078548,
                "altitude": 131.30670166015625,
                "heading": 314.1827087402344,
                "latitude": 22.4210338,
                "altitudeAccuracy": 2.850384473800659,
                "speed": 0.4856596291065216
            },
            "mocked": false,
            "timestamp": 1740565014878
        }
    },
    {
        "route": "8",
        "timeStamp": "2025-02-26T10:17:45.613Z",
        "location": {
            "coords": {
                "accuracy": 3.7899999618530273,
                "longitude": 114.2055749,
                "altitude": 138.40751938186813,
                "heading": 253.94085693359375,
                "latitude": 22.4204565,
                "altitudeAccuracy": 2.072134494781494,
                "speed": 1.7732813358306885
            },
            "mocked": false,
            "timestamp": 1740565064876
        }
    },
    {
        "route": "8",
        "timeStamp": "2025-02-26T10:18:49.720Z",
        "location": {
            "coords": {
                "accuracy": 3.7899999618530273,
                "longitude": 114.2035275,
                "altitude": 117.68632278407055,
                "heading": 358.5907897949219,
                "latitude": 22.4212364,
                "altitudeAccuracy": 2.850093364715576,
                "speed": 1.5467909574508667
            },
            "mocked": false,
            "timestamp": 1740565128876
        }
    },
    {
        "route": "8",
        "timeStamp": "2025-02-26T10:20:25.011Z",
        "location": {
            "coords": {
                "accuracy": 3.7899999618530273,
                "longitude": 114.2014672,
                "altitude": 79.49002892924722,
                "heading": 246.0520782470703,
                "latitude": 22.4226808,
                "altitudeAccuracy": 2.082517623901367,
                "speed": 1.6750344038009644
            },
            "mocked": false,
            "timestamp": 1740565224876
        }
    },
    {
        "route": "8",
        "timeStamp": "2025-02-26T10:23:22.719Z",
        "location": {
            "coords": {
                "accuracy": 3.7899999618530273,
                "longitude": 114.204511,
                "altitude": 5.5,
                "heading": 318.6658020019531,
                "latitude": 22.4275896,
                "altitudeAccuracy": 11.783760070800781,
                "speed": 0.3025689721107483
            },
            "mocked": false,
            "timestamp": 1740565402874
        }
    },
    {
        "route": "8",
        "timeStamp": "2025-02-26T10:25:41.180Z",
        "location": {
            "coords": {
                "accuracy": 3.7899999618530273,
                "longitude": 114.206151,
                "altitude": 5.300000190734863,
                "heading": 96.38887023925781,
                "latitude": 22.4257129,
                "altitudeAccuracy": 4.221073150634766,
                "speed": 0.4066522419452667
            },
            "mocked": false,
            "timestamp": 1740565540874
        }
    },
    {
        "route": "8",
        "timeStamp": "2025-02-26T10:28:20.394Z",
        "location": {
            "coords": {
                "accuracy": 3.7899999618530273,
                "longitude": 114.2129758,
                "altitude": 3.200000047683716,
                "heading": 169.38778686523438,
                "latitude": 22.4192251,
                "altitudeAccuracy": 9.909801483154297,
                "speed": 2.6554250717163086
            },
            "mocked": false,
            "timestamp": 1740565699874
        }
    },
    {
        "route": "8",
        "timeStamp": "2025-02-26T10:29:54.573Z",
        "location": {
            "coords": {
                "accuracy": 3.7899999618530273,
                "longitude": 114.2104814,
                "altitude": 19.200000762939453,
                "heading": 193.54624938964844,
                "latitude": 22.4151967,
                "altitudeAccuracy": 7.26227331161499,
                "speed": 0.5806030035018921
            },
            "mocked": false,
            "timestamp": 1740565793875
        }
    },
    {
        "route": "3",
        "timeStamp": "2025-02-27T05:40:35.118Z",
        "location": {
            "coords": {
                "accuracy": 3.7899999618530273,
                "longitude": 114.2099368,
                "altitude": 50.79999923706055,
                "heading": 107.29641723632812,
                "latitude": 22.4180684,
                "altitudeAccuracy": 10.519010543823242,
                "speed": 1.2537111043930054
            },
            "mocked": false,
            "timestamp": 1740634834845
        }
    },
    {
        "route": "3",
        "timeStamp": "2025-02-27T05:41:41.770Z",
        "location": {
            "coords": {
                "accuracy": 3.7899999618530273,
                "longitude": 114.2104571,
                "altitude": 47.66400146484375,
                "heading": 101.28888702392578,
                "latitude": 22.4178716,
                "altitudeAccuracy": 2.5,
                "speed": 1.0891306400299072
            },
            "mocked": false,
            "timestamp": 1740634901845
        }
    },
    {
        "route": "1A",
        "timeStamp": "2025-02-27T05:42:03.397Z",
        "location": {
            "coords": {
                "accuracy": 3.7899999618530273,
                "longitude": 114.2106951,
                "altitude": 43.194580078125,
                "heading": 106.43731689453125,
                "latitude": 22.4178259,
                "altitudeAccuracy": 2.5,
                "speed": 1.259494662284851
            },
            "mocked": false,
            "timestamp": 1740634922845
        }
    },
    {
        "route": "1A",
        "timeStamp": "2025-02-27T05:50:25.158Z",
        "location": {
            "coords": {
                "accuracy": 3.7899999618530273,
                "longitude": 114.2099665,
                "altitude": 3.5999999046325684,
                "heading": 197.5855255126953,
                "latitude": 22.4141956,
                "altitudeAccuracy": 7.761695861816406,
                "speed": 1.212018370628357
            },
            "mocked": false,
            "timestamp": 1740635424842
        }
    }
];

const StationCoordinates = Object.freeze({
    AREA_39_DOWNWARD: { latitude: 22.42762, longitude: 114.20436 }, //^ ???
    AREA_39_UPWARD: { latitude: 22.42762, longitude: 114.20436 }, //^ ???
    CAMPUS_CIRCUIT_EAST_DOWNWARD: { latitude: 22.41906, longitude: 114.21298 },
    CAMPUS_CIRCUIT_EAST_UPWARD: { latitude: 22.41915, longitude: 114.21290 },
    CAMPUS_CIRCUIT_NORTH: { latitude: 22.42569, longitude: 114.20608 }, //^ ???
    CHAN_CHUN_HA_HOSTEL: { latitude: 22.42181, longitude: 114.20466 },
    CHUNG_CHI_TEACHING_BUILDING: { latitude: 22.41596, longitude: 114.20833 },
    CWC_COLLEGE_DOWNWARD: { latitude: 22.42569, longitude: 114.20608 }, //^ ???
    CWC_COLLEGE_UPWARD: { latitude: 0, longitude: 0 }, //! TBD
    FUNG_KING_HEY_BUILDING: { latitude: 22.41983, longitude: 114.20302 },
    NEW_ASIA_CIRCLE: { latitude: 22.42096, longitude: 114.20775 },
    NEW_ASIA_COLLEGE: { latitude: 22.42128, longitude: 114.20750 },
    POSTGRADUATE_HALL_1: { latitude: 22.42034, longitude: 114.21215 },
    RESIDENCE_10: { latitude: 0, longitude: 0 }, //! TBD
    RESIDENCE_15: { latitude: 22.42377, longitude: 114.20665 },
    SCIENCE_CENTRE: { latitude: 22.41985, longitude: 114.20719 },
    SHAW_COLLEGE_DOWNWARD: { latitude: 22.42242, longitude: 114.20126 },
    SHAW_COLLEGE_UPWARD: { latitude: 22.42252, longitude: 114.20143 },
    SHHO_COLLEGE: { latitude: 22.41801, longitude: 114.20994 },
    SIR_RUN_RUN_SHAW_HALL: { latitude: 22.41984, longitude: 114.20697 },
    UNITED_COLLEGE_DOWNWARD: { latitude: 22.42030, longitude: 114.20528 },
    UNTIED_COLLEGE_STAFF_RESIDENCE: { latitude: 22.42324, longitude: 114.20516 },
    UNITED_COLLEGE_UPWARD: { latitude: 22.42040, longitude: 114.20534 },
    UNIVERSITY_ADMIN_BUILDING: { latitude: 22.41882, longitude: 114.20536 },
    UNIVERSITY_SPORTS_CENTRE: { latitude: 22.41781, longitude: 114.21041 },
    UNIVERSITY_STATION: { latitude: 22.41453, longitude: 114.21024 },
    UNIVERSITY_STATION_TERMINUS: { latitude: 22.41517, longitude: 114.21053 },
    UNIVERSITY_STATION_PIAZZA: { latitude: 22.41382, longitude: 114.20946 },
    UNIVERSITY_STATION_PIAZZA_TERMINUS: { latitude: 22.41399, longitude: 114.20981 },
    WU_YEE_SUN_COLLEGE_DOWNWARD: { latitude: 22.42109, longitude: 114.20353 },
    WU_YEE_SUN_COLLEGE_UPWARD: { latitude: 22.42121, longitude: 114.20345 },
    YIA: { latitude: 22.41599, longitude: 114.21083 },
});

function haversineDistance(coord1, coord2) {
    const toRad = (x: number) => x * Math.PI / 180;
    const R = 6371; // Radius of the Earth in km
    const dLat = toRad(coord2.latitude - coord1.latitude);
    const dLon = toRad(coord2.longitude - coord1.longitude);
    const lat1 = toRad(coord1.latitude);
    const lat2 = toRad(coord2.latitude);

    const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +
        Math.sin(dLon / 2) * Math.sin(dLon / 2) * Math.cos(lat1) * Math.cos(lat2);
    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
    return R * c;
}

function findClosestStation(location) {
    let closestStation = null;
    let closestDistance = Infinity;
    for (const [station, coords] of Object.entries(StationCoordinates)) {
        const distance = haversineDistance(location.coords, coords);
        if (distance < closestDistance) {
            closestDistance = distance;
            closestStation = station;
        }
    }
    return closestStation;
}

data.forEach((entry) => {
    const station = findClosestStation(entry.location);
    console.log(`Route: ${entry.route}, Time: ${entry.timeStamp}, Closest Station: ${station}`);
});